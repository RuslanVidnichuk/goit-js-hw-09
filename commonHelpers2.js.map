{"version":3,"file":"commonHelpers2.js","sources":["../src/js/2-form.js"],"sourcesContent":["const STORAGE_KEY = '\"feedback-form-state\"'\nconst form = document.querySelector('.feedback-form');\n\nform.addEventListener('input', () => {\n    const userMail = form.elements.email.value;\n    const userText = form.elements.message.value;\n\n    const data = {\n        mail: userMail,\n        text: userText,\n    }\n    \n    saveInLS(STORAGE_KEY, data);\n});\n\nfunction loadFromLS(key) {\n    const data = localStorage.getItem(key);\n    try {\n        const result = JSON.parse(data);\n        return result;\n    } catch {\n        return data;\n    }\n}\n\n\n\nfunction saveInLS(key, value) {\n    const trimmedValue = {\n        mail: value.mail.trim(),\n        text: value.text.trim(),\n    };\n    const jsonSave = JSON.stringify(trimmedValue);\n    localStorage.setItem(key, jsonSave);\n}\n\nfunction loadData() {\n    const {mail, text} = loadFromLS(STORAGE_KEY) || {};\n    form.elements.email.value = mail || '';\n    form.elements.message.value = text || '';\n}\n\nloadData();\n\nform.addEventListener('submit', (e) => {\n    e.preventDefault();\n\n    if (form.elements.email.value && form.elements.message.value !== \"\") {\n        const data = loadFromLS(STORAGE_KEY) || {};\n        localStorage.removeItem(STORAGE_KEY);\n        form.reset();\n        const sendData = {\n            email: data.mail,\n            message: data.text,\n        }\n        console.log(sendData);\n    } else {\n        alert(`Please fill in all form fields before submitting.`);\n    }\n})"],"names":["STORAGE_KEY","form","userMail","userText","saveInLS","loadFromLS","key","data","value","trimmedValue","jsonSave","loadData","mail","text","e","sendData"],"mappings":"oDAAA,MAAMA,EAAc,wBACdC,EAAO,SAAS,cAAc,gBAAgB,EAEpDA,EAAK,iBAAiB,QAAS,IAAM,CACjC,MAAMC,EAAWD,EAAK,SAAS,MAAM,MAC/BE,EAAWF,EAAK,SAAS,QAAQ,MAOvCG,EAASJ,EALI,CACT,KAAME,EACN,KAAMC,CACT,CAEyB,CAC9B,CAAC,EAED,SAASE,EAAWC,EAAK,CACrB,MAAMC,EAAO,aAAa,QAAQD,CAAG,EACrC,GAAI,CAEA,OADe,KAAK,MAAMC,CAAI,CAEtC,MAAY,CACJ,OAAOA,CACV,CACL,CAIA,SAASH,EAASE,EAAKE,EAAO,CAC1B,MAAMC,EAAe,CACjB,KAAMD,EAAM,KAAK,KAAM,EACvB,KAAMA,EAAM,KAAK,KAAM,CAC/B,EACUE,EAAW,KAAK,UAAUD,CAAY,EAC5C,aAAa,QAAQH,EAAKI,CAAQ,CACtC,CAEA,SAASC,GAAW,CAChB,KAAM,CAAC,KAAAC,EAAM,KAAAC,CAAI,EAAIR,EAAWL,CAAW,GAAK,GAChDC,EAAK,SAAS,MAAM,MAAQW,GAAQ,GACpCX,EAAK,SAAS,QAAQ,MAAQY,GAAQ,EAC1C,CAEAF,IAEAV,EAAK,iBAAiB,SAAWa,GAAM,CAGnC,GAFAA,EAAE,eAAc,EAEZb,EAAK,SAAS,MAAM,OAASA,EAAK,SAAS,QAAQ,QAAU,GAAI,CACjE,MAAMM,EAAOF,EAAWL,CAAW,GAAK,CAAA,EACxC,aAAa,WAAWA,CAAW,EACnCC,EAAK,MAAK,EACV,MAAMc,EAAW,CACb,MAAOR,EAAK,KACZ,QAASA,EAAK,IACjB,EACD,QAAQ,IAAIQ,CAAQ,CAC5B,MACQ,MAAM,mDAAmD,CAEjE,CAAC"}